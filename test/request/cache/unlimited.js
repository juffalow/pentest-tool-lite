import chai from 'chai';
const expect = chai.expect;
import Unlimited from '../../../src/request/cache/Unlimited';

describe('test Unlimited cache', function() {
  it('has() should return false if url was not added', () => {
    const unlimited = new Unlimited();

    expect(unlimited.has('https://example.com/')).to.be.false;
    unlimited.add('https://example.com/2', {}, {}, {});
    expect(unlimited.has('https://example.com/')).to.be.false;
  });

  it('has() should return true if url was added', () => {
    const unlimited = new Unlimited();

    unlimited.add('https://example.com/', {}, {}, {});
    expect(unlimited.has('https://example.com/')).to.be.true;
  });

  it('get() should return null if url was not added', () => {
    const unlimited = new Unlimited();

    expect(unlimited.get('https://example.com/')).to.be.null;
    unlimited.add('https://example.com/2', {}, {}, {});
    expect(unlimited.get('https://example.com/')).to.be.null;
  });

  it('get() should return null if url was added', () => {
    const unlimited = new Unlimited();

    unlimited.add('https://example.com/', {}, {}, {});
    expect(unlimited.get('https://example.com/')).to.not.be.null;
  });

  it('clear() should forget everything', () => {
    const unlimited = new Unlimited();

    unlimited.add('https://example.com/', {}, {}, {});
    unlimited.clear();
    expect(unlimited.get('https://example.com/')).to.be.null;
  });
});
