import { Parser } from 'htmlparser2';
import DomHandler from 'domhandler';

export default function(result) {
  return new Promise(function(resolve, reject) {
    const handler = new DomHandler(function (error, dom) {
      resolve({
        url: result.url,
        html: dom,
      });
    });
    const parser = new Parser(handler, {lowerCaseAttributeNames: true});
    parser.write(result.body);
    parser.end();
  });
}
