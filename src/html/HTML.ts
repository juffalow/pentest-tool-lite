import Test from '../Test';
import CSS from './CSS';
import JavaScript from './JavaScript';
import Image from './Image';

class HTML extends Test {
  protected factory: FactoryInterface;

  constructor(factory: FactoryInterface) {
    super();
    this.factory = factory;
  }

  async run(url: string): Promise<ResultInterface> {
    const css = new CSS(this.factory.getRequest(), this.factory.getParseHTML(), this.factory.getGetResources(), this.factory.getLogger());
    const javaScript = new JavaScript(this.factory.getRequest(), this.factory.getParseHTML(), this.factory.getGetResources(), this.factory.getLogger());
    const image = new Image(this.factory.getRequest(), this.factory.getParseHTML(), this.factory.getGetResources(), this.factory.getLogger());

    const results = [
      await css.run(url),
      await javaScript.run(url),
      await image.run(url),
    ];

    return this.getResult('HTML', this.getStatus(results), results);
  }
}

export default HTML;
