import Test, { TestParameters, Result } from '../Test';
import request from '../request';
import logger from '../logger';

class RobotsTXT extends Test {
  public name = 'Robots.txt';

  public async test({ url }: TestParameters): Promise<Result> {
    logger.info('Starting robotstxt test...');
    const response = await request.get(url + '/robots.txt');

    if (response !== null && response.statusCode === 200)
    {
      return {
        status: 'SUCCESS',
        title: 'Robots.txt',
        description: 'Site does contain robots.txt',
      };
    }

    return {
      status: 'ERROR',
      title: 'Robots.txt',
      description: 'Site does not contain robots.txt',
    };
  }
}

export default RobotsTXT;
